<!DOCTYPE html>
<!--íƒ€ì„ë¦¬í”„ ë° ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í™•ì¥ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚¬ìš©-->
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> ì¡°íšŒ </title>
    <style>

        #wrapper {
            background-color: white;
        }

        #info {
            list-style-type: none;
            padding: 0;
            height: 40px;
            min-width: 850px;
        }

        #info::after {
            content: "";
            clear: both;
            display: block;
        }

        #info > li {
            float: left;
            width: 23%;
            line-height: 40px;
        }

        #info > li:first-child {
            width: 8%;
        }

        .dropdown {
            position: relative;
        }

        .dropdown button {
            position: absolute;
            right: 0;
        }

        #commentContainer {
            padding: 35px;
        }

        #commentContainer .comment-username {
            height: 33px;
            border-top-left-radius: 0.375rem;
            border-top-right-radius: 0.375rem;
            border-bottom-right-radius: 0;
            border-bottom-left-radius: 0;
            margin-left: 0px;

            transition: background-color 1000ms linear;
        }

        #commentContainer .other-comment .comment-username:hover {
            color: blue;
            text-decoration: underline;
            cursor: pointer;
        }

        #commentContainer .other-comment-reply .comment-username {
            border-top-left-radius: 0;
            cursor: pointer;
        }

        #commentContainer .other-comment-reply .comment-username:hover{
            color: blue;
            text-decoration: underline;
            cursor: pointer;
        }


        #commentContainer .comment-delete {
            display: block;
            position: absolute;
            right: 0px;
            top: 3px;
            text-decoration: none;
            text-indent: 5px;
            width: 30px;
            height: 30px;
        }

        #commentContainer .comment-delete:hover {
            cursor: pointer;
        }

        #commentContainer .comment-content {
            display: block;
            border-top-right-radius: 0;
            border-top-left-radius: 0;
            background-color: white;
        }

        #commentContainer .btn {
            border-top-right-radius: 0;
            margin-left: 1px;
        }

        #commentContainer .comment-update {
            border-bottom-right-radius: 0.375rem;
        }

        #commentHeader {
            font-size: 1.2em;
            margin-bottom: 20px;
            text-indent: 0.5em;
        }

       #commentContainer .other-comment {
            margin-bottom: 20px;
           position: relative;
        }

        #commentContainer .comment-update-submit {
            display: none;
        }

        .empty-container .other-comment-empty {
            display: none;
        }

        .other-comment-reply {
            position: relative;
            padding-left: 40px;
            margin-bottom: 20px;
        }

        #commentContainer .other-comment-reply .comment-content {
            position: relative;
        }

        #commentContainer .comment-reply-for {
            border-bottom-left-radius: 0;
            color: blue;
            height: 33px;
        }

        .is-reply {
            display: none;
        }

        /* ë¶€íŠ¸ìŠ¤íŠ¸ë© ê¸°ë³¸ ìŠ¤íƒ€ì¼ ìˆ˜ì • (other-comment ì–´ê¸‹ë‚¨ ìˆ˜ì •) */
        #container .input-group>:not(:first-child):not(.dropdown-menu):not(.valid-tooltip):not(.valid-feedback):not(.invalid-tooltip):not(.invalid-feedback) {
            margin-left: 0;
        }

        /* ckeditor ì½ê¸° í…Œë‘ë¦¬ ì œê±° */
        #container .ck-content {
            border-style: none;
        }

        #container textarea {
            display: none;
        }

        #container #commentContainer .highlighted {
            background-color: darkorange;
        }


    </style>
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
          crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" th:href="@{/css/nav-css.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/global.css}" href="/static/css/global.css">
    <script src="/static/js/ckeditor5/build/ckeditor.js" th:src="@{/js/ckeditor5/build/ckeditor.js}"></script>
    <script>
        $(function () {

// alert
            $(window).on("load", function () {
                let alertMessage = $("#globalAlertMessage").data("alertmessage");
                if (alertMessage) {
                    alert(alertMessage);
                }
            })

// CK editor
            ClassicEditor
                .create( document.querySelector( '#article' ))

                .then( editor => {
                window.editor = editor;
                // editor.enableReadOnlyMode('my feature Id')
                editor.enableReadOnlyMode('1');
                const toolbarElement = editor.ui.view.toolbar.element;
                toolbarElement.style.display = 'none';
            } )
                .catch( error => {
                console.error( 'ckeditor ì—ëŸ¬' );
                console.error( error );
            } );

// myComment ì—ì„œ ë„˜ì–´ì™”ì„ë•Œ, comment highlight
            let selectedCommentId = $("#selectedCommentId").data("selectedcommentid");
            // console.log("selectedCommentId = " + selectedCommentId);
            if (selectedCommentId) {
                let $selectedComment = $("#comment" + selectedCommentId).find(".comment-username");

                $(window).on("load", function () {
                    $selectedComment[0].scrollIntoView({block:"center"});
                    $selectedComment.addClass("highlighted");

                    setTimeout(function () {
                        $selectedComment.removeClass("highlighted");
                    }, 1000)
                })
            }

// ëŒ€ëŒ“ê¸€ ë¡œë“œ (reply ì†ì„± ì ìš© ë° ìœ„ì¹˜ë³€ê²½)
            $(".other-comment").each(function (index, item) {
                // ì—†ìœ¼ë©´ length = 0 ë°°ì—´, ìˆìœ¼ë©´ ìˆëŠ”ê°¯ìˆ˜ë§Œí¼ length ìˆëŠ” ë°°ì—´ ë‚˜ì˜´
                let isReply = $(item).children(".comment-reply-for").length;

                let afterTargetId = $(item).find(".comment-groupId").val();
                // console.log("afterTarget " + afterTargetId)

                // ëŒ€ëŒ“ê¸€ì´ë©´
                if (isReply) {

                    // ëŒ€ëŒ“ê¸€ í´ë˜ìŠ¤ë¡œ ë³€ê²½
                    $(item).addClass("other-comment-reply").removeClass("other-comment");

                    // data-group ì†ì„± ê°’ì´ ë‹µê¸€ ë¶™ì¼ groupId ì™€ ê°™ì€ ìš”ì†Œ ì¤‘ ì²«ë²ˆì§¸ (ëª¨ëŒ“ê¸€)
                    //      .nextUntil(.other-comment) => ë‹¤ìŒ other-comment ê¹Œì§€ .last() ì¤‘ ë§ˆì§€ë§‰
                    //      ì´ë•Œ, ìê¸°ìì‹  (ëª¨ëŒ“ê¸€) ì€ ì„ íƒë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì²«ë²ˆì§¸ ë‹µê¸€ì€ length=0 ì¸ ì œì´ì¿¼ë¦¬ê°ì²´ë°°ì—´(?) ë‚˜ì˜¤ëŠ”ë“¯
                    let targetPosition = $(".comment[data-group='" + afterTargetId + "']").first().nextUntil(".other-comment").last();

                    // console.log(targetPosition)

                    // ì²«ë²ˆì§¸ ë‹µê¸€ -> ëª¨ëŒ“ê¸€ ë‹¤ìŒì— ë¶€ì°©
                    if (targetPosition.length == 0) {
                        $(".comment[data-group='" + afterTargetId + "']").first().after($(item));
                        return;
                    }

                    // ë‘ë²ˆì§¸ ì´í›„ ë¶€í„° ë‹µê¸€ -> ì°¾ì€ ìœ„ì¹˜ì— ë¶€ì°©
                    targetPosition.after($(item));
                }
            })

// ë‚´ë¶€ ë„¤ë¹„ê²Œì´ì…˜ ë™ì‘
            $("#read-nav button").on("click", function (event) {
                event.preventDefault();

                // baseUrl
                let baseUrl = $(this).data("url");
                let isDelete = $(this).hasClass("delete");

                if (isDelete) {
                    // No - return í•¨
                    if (!confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                        return;
                    }
                    $("#pageInfo").attr("method", "post");

                    // ì‚­ì œì˜ ê²½ìš°, post ë°©ì‹ìœ¼ë¡œ ì „ì†¡í•˜ê¸° ë•Œë¬¸ì— ë”°ë¡œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ë¶™ì„
                    baseUrl += location.search;
                }

                let option = $("#pageInfo>input[name='option']").val();
                console.log("option = " + option);

                // ê²€ìƒ‰ì¤‘ì´ ì•„ë‹ë•Œ = íŒŒë¼ë¯¸í„° ì‚­ì œ
                if (!option) {
                    $("#pageInfo>input.searching").remove();
                }

                // input hiddenì— ë‹´ì•„ submit
                $("#pageInfo").attr("action", baseUrl).submit();
            })

// ëŒ“ê¸€ ë“±ë¡
            $(".comment-submit").on("click", function (event) {
                event.preventDefault();
                let submitContent = $(this).prev().val();

                if (isContentEmpty(submitContent)) {
                    alert("ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”");
                    return;
                }

                // 1 == reply
                let isreply = $(this).data("isreply");

                // ì¿¼ë¦¬ìŠ¤íŠ¸ë§ í˜•ì‹ìœ¼ë¡œ í¼ ë°ì´í„° ë³€í™˜
                // application/x-www-form-urlencoded => @ModelAttribute ë¡œ ë°›ìŒ
                let params = $(this).parent().parent().serialize();
                // let paramsArray = $("#myCommentForm").serializeArray();

                // console.log("params: " + params);

                $.ajax({
                    type: "post",
                    async: false,
                    url: "/comment",
                    data: params,
                    success: function (resp) {

                        if (resp.result != "1") {
                            alert("ëŒ“ê¸€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")
                            return;
                        }

                        // ë‹µê¸€ì´ë©´ ë¦¬ë¡œë“œ
                        if (isreply) {
                            alert("ë‹µê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.")
                            location.reload();
                            return;
                        }

                        // ë¹ˆ ëŒ“ê¸€ í¼ì— ì…ë ¥í•´ì„œ ì»¨í…Œì´ë„ˆì— ë¶™ì„
                        // selector ë¡œ ì°¾ì•„ì„œ .end ë¡œ ëë‚´ê³  ë‹¤ì‹œì°¾ê¸° vs .next() ë“±ìœ¼ë¡œ ì´ë™í•˜ê¸°
                        let inputList = resp.inputList;
                        $(".other-comment-empty input").each(function (index, item) {
                            $(item).val(inputList[index]);
                        })
                        // clone([ì´ë²¤íŠ¸ë³µì‚¬ì—¬ë¶€, bool]) -> ê·¼ë° í•˜ìœ„ ì´ë²¤íŠ¸ëŠ” ë³µì‚¬ ì•ˆë˜ëŠ”ë“¯?
                        $(".other-comment-empty").clone(true)
                            .attr("id", "comment" + resp.commentId)
                            .children(".comment-reply-for").css("display", "none").end()
                            .children(".comment-username").text(resp.writer).on("click", makeReply).end()
                            .children(".comment-delete").attr("data-id", resp.commentId).end()
                            .find(".comment-content").attr("placeholder", resp.content).end()
                            .find(".comment-update").attr("data-id", resp.commentId).end()
                            .removeClass("other-comment-empty").addClass("other-comment")
                            .css("display", "block").appendTo($("#otherCommentContainer"));

                        // ë‚´ ëŒ“ê¸€ì°½ ì…ë ¥ì´ˆê¸°í™”
                        $("#myComment .comment-content").val("");

                        alert("ëŒ“ê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
                    },//ajax ì—ëŸ¬í™•ì¸
                    error: function (request, status, error) {
                        console.log("code: " + request.status)
                        console.log("message: " + request.responseText)
                        console.log("error: " + error);
                    }
                })
            })

// ëŒ“ê¸€ê³¼ ëŒ€ëŒ“ê¸€ ìˆ˜ì • ê²€ì‚¬ ë° ìˆ˜ì •í¼ ë³€ê²½
            $(".comment-update").on("click", function (event) {
                let myMemberId = $("#myComment .comment-memberId").val();
                let myWriter = $("#myComment .comment-writer").val();

                // íƒ€ì„ë¦¬í”„ë¡œ other-comment ë§ˆë‹¤ #commentN (N=state.count) ë¡œ id ë¶€ì—¬
                let commentId = $(this).data("id");
                // í•´ë‹¹ id ë¡œ íƒìƒ‰
                let commentMemberId = $("#comment" + commentId + " .comment-memberId").val();

                console.log("commentWriter = " + commentMemberId + " mywriter = " + myMemberId);

                // ë¡œê·¸ì¸ í™•ì¸
                if (myWriter == null) { alert("ë¡œê·¸ì¸ í•´ ì£¼ì„¸ìš”"); return false; }

                // length > 1 == writing (true)
                let isWriting = $(".comment .bg-primary").length;

                // ì‘ì„±ì¤‘ì¸ì§€ í™•ì¸
                if (isWriting) {
                    alert("ë‹¤ë¥¸ ì‘ì—…ì„ ì™„ë£Œ í•´ ì£¼ì„¸ìš”")
                    return false;
                }

                // ì‘ì„±ì í™•ì¸
                if (commentMemberId != myMemberId && myWriter != 'admin' ) { alert("ìˆ˜ì •í•˜ë ¤ëŠ” ëŒ“ê¸€ì˜ ì‘ì„±ìê°€ ì•„ë‹™ë‹ˆë‹¤."); return false;}

                let content = $("#comment" + commentId + " .comment-content").attr("placeholder");
                $("#comment" + commentId + " .comment-content").val(content);

                $(this).prev().attr({ disabled: false, required: true });
                $("#comment" + commentId + " .comment-username").addClass("bg-primary text-white").off("click");

                // delete ë²„íŠ¼ ì œê±°
                // $(this).parent().prev().css("display", "none");

                // ë²„íŠ¼ ë“±ë¡ìœ¼ë¡œ ë°”ê¿ˆ
                $(this).css("display", "none").next().css("display", "block");

            })

// ëŒ“ê¸€ ìˆ˜ì •
            $(".comment-update-submit").on("click", function (event) {

                let commentId = $(event.target).prev().data("id");
                let content = $("#comment" + commentId + " textarea").val();

                // 1 ë³´ë‹¤ í¬ë©´ reply
                let isReply = $(this).parent().siblings(".is-reply").length;

                if (isContentEmpty(content)) {
                    alert("ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
                    return false;
                }

                $.ajax({
                    type: "post",
                    async: false,
                    url: "/comment/" + commentId,
                    data: {content: content},
                    success: function (resp) {

                        if (resp.result != "1") {
                            alert("ëŒ“ê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")
                            return;
                        }

                        // ë‹µê¸€ì´ë©´
                        if (isReply) {
                            alert("ë‹µê¸€ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
                            location.reload();
                            return false;
                        }

                        $("#comment" + resp.commentId)
                            // ì¼ë°˜ ëŒ“ê¸€ë¡œ ë³€ê²½
                            .children(".comment-username").removeClass("bg-primary text-white")
                            .on("click", makeReply).end()
                            // ì‚­ì œë²„íŠ¼ ë³µêµ¬
                            .children(".comment-delete").css("display", "block").end()
                            // (ì—…ë°ì´íŠ¸)ë“±ë¡ ë²„íŠ¼ ì œê±°
                            .find(".comment-update-submit").css("display", "none").end()
                            // ìˆ˜ì •ë²„íŠ¼ ë³µêµ¬
                            .find(".comment-update").css("display", "block").end()
                            // value -> placeholder, disabled
                            .find(".comment-content").val("").attr({ placeholder: resp.content,
                            disabled: true})
                        alert("ëŒ“ê¸€ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.")
                    },
                    //ajax ì—ëŸ¬í™•ì¸
                    error: function (request, status, error) {
                        console.log("code: " + request.status)
                        console.log("message: " + request.responseText)
                        console.log("error: " + error);
                    }
                })
            })

// ëŒ“ê¸€ì˜ X ë²„íŠ¼ ëˆŒëŸ¿ì„ë•Œ ë™ì‘ (ëŒ“ê¸€/ëŒ€ëŒ“ê¸€ì‚­ì œ, ëŒ€ëŒ“ê¸€ ì‘ì„±/ìˆ˜ì •ì·¨ì†Œ)
            $(".comment-delete").on("click", function (event) {
                event.preventDefault();
                let commentMemberId = $(this).siblings(".comment-memberId").val();
                let myMemberId = $("#myComment .comment-memberId").val();
                let myWriter = $("#myComment .comment-writer").val();
                let commentId = $(this).data("id");

                if (myMemberId == null) {
                    alert("ë¡œê·¸ì¸ í•´ ì£¼ì„¸ìš”"); return;
                }

                // ëŒ€ëŒ“ê¸€ ì‘ì„± ì·¨ì†Œ
                if ($(this).parent().prop("id") == "myCommentReplyForm") {
                    $(this).parent().parent().remove();
                    return false;
                }

                // .comment-update-submit ë²„íŠ¼ì˜ display ê°€ block ì´ë©´ ìˆ˜ì •ì¤‘
                let isUpdate = $(this).parent().find(".comment-update-submit").css("display");
                console.log("isUpdate" + isUpdate)
                // ë‹µê¸€ ìˆ˜ì • ì·¨ì†Œ
                if (isUpdate == "block") {
                    alert("ìˆ˜ì •ì„ ì·¨ì†Œí•©ë‹ˆë‹¤.")
                    location.reload();
                    return false;
                }

                if (myMemberId != commentMemberId && myWriter != 'admin') {
                    alert("ì‚­ì œí•˜ë ¤ëŠ” ëŒ“ê¸€ì˜ ì‘ì„±ìê°€ ì•„ë‹™ë‹ˆë‹¤."); return;
                }

                if (!confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                    return;
                }

                $.ajax({
                    type: "post",
                    async: false,
                    url: "/comment/" + commentId + "/delete",
                    success: function (resp) {

                        if (resp.result != "1") {
                            alert("ëŒ“ê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")
                            return;
                        }

                        alert("ëŒ“ê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
                        location.reload();
                    },
                    error: function (request, status, error) {
                        console.log("code: " + request.status)
                        console.log("message: " + request.responseText)
                        console.log("error: " + error);
                    }
                })
            })

// ëŒ€ëŒ“ê¸€ í¼ ìƒì„±
            $(".other-comment>.comment-username, .other-comment-reply>.comment-username").each(function (index, item) {
                $(item).on("click", makeReply)
            })

// ëŒ€ëŒ“ê¸€ ì½œë°±í•¨ìˆ˜
            function makeReply (event) {
                // event.stopPropagation();

                let isWriting = $("#myCommentReply").length;
                // ë‹¤ë¥¸ ëŒ€ëŒ“ê¸€ì„ ì‘ì„±ì¤‘ì´ë©´ ì´ë²¤íŠ¸ ë§‰ê¸°
                if (isWriting != 0) {
                    alert("ë‹¤ë¥¸ ì‘ì—…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”")
                    return false;
                }

                // click í•œ username ì˜ í˜•ì œ .comment-delete ì—ì„œ commentId íšë“
                let groupId = $(this).siblings(".comment-delete").data("id");

                // ë‹µê¸€ ë‹¬ ëŒ€ìƒì´ ëŒ“ê¸€ì¸ì§€ ëŒ€ëŒ“ê¸€ì¸ì§€ í™•ì¸
                if ($(this).siblings(".comment-depth").val() == 1) {
                    // ëŒ€-ëŒ€ëŒ“ê¸€
                    groupId = $(this).siblings(".comment-groupId").val();
                } else {
                    // ëŒ€ëŒ“ê¸€
                    groupId = $(this).siblings(".comment-delete").data("id");
                }

                let targetId = $(this).siblings(".comment-memberId").val();
                // click í•œ username ì˜ ë¶€ëª¨ .other-comment ì˜ í˜•ì œì¤‘ reply ê°¯ìˆ˜( ë‹¤ìŒ other-comment ì§ì „ê¹Œì§€) íšë“
                let order = $(this).parent().nextUntil(".other-comment").length + 1;
                let target = $(this).text();

                // #myComment ë³µì‚¬í•´ì„œ ì¶”ê°€
                $("#myComment").clone(true)
                    .prop("id", "myCommentReply")
                    .children("#myCommentForm").prop("id", "myCommentReplyForm")
                    .children(".comment-username").end()
                    .children(".comment-groupId").val(groupId).end()
                    .children(".comment-order").val(order).end()
                    .children(".comment-depth").val("1").end()
                    .children(".comment-target").val(target).end()
                    .children(".comment-targetId").val(targetId).end()
                    .find(".comment-submit").attr("data-isreply", "1").end()
                    // ë‹¤ì‹œ #mycommentForm ìœ¼ë¡œ
                    .end()
                    .addClass("other-comment-reply")
                    .find(".comment-writer").before(
                        $(".other-comment-empty>.comment-reply-for").clone(true)
                            .text("@" + $(this).text())).end()
                    .find(".comment-username").after($(".other-comment-empty>.comment-delete").clone(true)).end()
                    .insertAfter($(this).parent());
            };

            // ëŒ“ê¸€ ë‚´ìš© ë¹„ì—ˆëŠ”ì§€ í™•ì¸
            function isContentEmpty(content) {
                return (content == "" || content == null) ? true : false;
            }

        });
    </script>
</head>
<body id="body">
<div id="container" class="container">

    <nav th:replace="fragment/fragment.html :: nav-fragment">
    </nav>

    <div id="globalAlertMessage" th:data-alertmessage="${alertMessage}"></div>

    <div id="wrapper">

        <h2 id="headerText" th:text="${board.title}"> Title </h2>

        <hr>

        <ul id="info">
            <li th:data-boardId="${board.id}">
            </li>
            <li>
                <span>ì¹´í…Œê³ ë¦¬: </span>
                <span id="categoryCode" th:data-categoryCode="${criteria.getCategoryCode()}"></span>
                <span id="infoCategory" th:text="${board.category.getCategoryName()}" th:data-category="${board.category.getCode()}">ì¹´í…Œê³ ë¦¬</span>
            </li>
            <li>
                <span>ì‘ì„±ì: </span>
                <span th:text="${board.writer}">ì‘ì„±ì</span>
            </li>
            <li>
                <span>ì‘ì„±: </span>
                <span th:text="${#temporals.format(board.regDate, 'yyyy-MM-dd HH:mm')}">ì‘ì„±ì‹œê°„</span>
            </li>
            <li>
                <span>ìˆ˜ì •:</span>
                <span th:text="${#temporals.format(board.updateDate, 'yyyy-MM-dd HH:mm')}" >ìˆ˜ì •ì‹œê°„</span>
            </li>
        </ul>
        <hr>

        <!-- ê¸€ ë‚´ìš© (ckeditor readonly) -->
        <textarea th:text="${board.content}" id="article">Content</textarea>
        <hr>

        <!-- ë‚´ë¶€ ë„¤ë¹„ -->
        <div id="read-nav">
            <!-- ê³µì§€ ìˆ˜ì •/ì‚­ì œ -->
            <div th:if="${board.category.name().equals('NOTICE')}">
                <button type="button" class="btn btn-primary" th:data-url="'/boards'">ëª©ë¡</button>
                <button type="button" class="btn btn-primary" th:data-url="'/board/' + ${board.id} + '/edit'"
                        sec:authorize="hasRole('ROLE_ADMIN')">ìˆ˜ì •</button>
                <button type="button" class="btn btn-primary delete" th:data-url="'/board/' + ${board.id} + '/delete'"
                        sec:authorize="hasRole('ROLE_ADMIN')">ì‚­ì œ</button>
            </div>
            <!-- ì¼ë°˜ ìˆ˜ì •/ì‚­ì œ -->
            <div th:unless="${board.category.name().equals('NOTICE')}">
                <button type="button" class="btn btn-primary" th:data-url="'/boards'">ëª©ë¡</button>
                <button type="button" class="btn btn-primary" th:data-url="'/board/' + ${board.id} + '/edit'"
                        sec:authorize="authenticated">ìˆ˜ì •</button>
                <button type="button" class="btn btn-primary delete" th:data-url="'/board/' + ${board.id} + '/delete'"
                        sec:authorize="authenticated">ì‚­ì œ</button>
            </div>
        </div>

    </div>

    <!-- ëŒ“ê¸€ -->
    <div id="commentContainer">
        <div id="commentHeader" th:text="'ğŸ’¬ ' + ${commentList.size()} + 'ê°œì˜ ëŒ“ê¸€'">
            ğŸ’¬ 00ê°œì˜ ëŒ“ê¸€
        </div>
        <div id="otherCommentContainer">
            <!-- other-comment ì™€ other-comment-reply ë¥¼ ë¬¶ê¸°ìœ„í•´ comment í´ë˜ìŠ¤ ì„ì‹œë¡œ ë„£ìŒ -->
            <div class="other-comment input-group comment" th:each="comment, commentState : ${commentList}" th:id="'comment'+ ${comment.getCommentId()}"
                th:data-group="${comment.groupId}">
                <!-- ë‚˜ì¤‘ì— jquery ì—ì„œ ì–˜ê°€ ìˆìœ¼ë©´ .parent().addClass(other-comment-reply).removeClass...-->
                <span th:if="${comment.getTarget() != null && comment.getTarget() != ''}" class="input-group-text comment-reply-for"
                      th:text="'@' + ${comment.getTarget()}">@ìƒëŒ€ë°©ID</span>
                <!-- th placeholder comment.username -->
                <input type="hidden" class="comment-writer form-control" th:value="${comment.writer}" name="writer">
                <!-- th text comment.username -->
                <span class="input-group-text comment-username flex-fill" th:text="${comment.writer}">writer</span>
                <a class="comment-delete" th:href="@{/comment/delete/{commentId}(commentId=${comment.getCommentId()})}"
                    th:data-id="${comment.getCommentId()}">âœ–</a>
                <div class="input-group">
                    <textarea class="comment-content form-control form-control-sm" name="content" th:placeholder="${comment.content}" disabled maxlength="50"></textarea>
                    <button class="btn btn-outline-secondary comment-update" type="button" th:data-id="${comment.commentId}"
                            >ìˆ˜ì •</button>
                    <button class="btn btn-outline-secondary comment-update-submit" type="button">ë“±ë¡</button>
                </div>
                <input type="hidden" class="comment-boardId" name="boardId" value="0" th:value="${boardId}">
                <input type="hidden" class="comment-memberId" name="memberId" value="0" th:value="${comment.memberId}">
                <input type="hidden" class="comment-groupId" name="groupId" value="0" th:value="${comment.groupId}">
                <input type="hidden" class="comment-order" name="groupOrder" value="0" th:value="${comment.groupOrder}">
                <input type="hidden" class="comment-depth" name="groupDepth" value="0" th:value="${comment.groupDepth}">
                <input type="hidden" class="comment-category" name="category" value="" th:value="${comment.category.name()}">
                <div class="is-reply" th:if="${comment.groupDepth > 0}"></div>
            </div>
        </div>
        <div id="myComment" sec:authorize="isAuthenticated()">
            <form id="myCommentForm" class="input-group" th:action="@{/comment/write}" method="post">
                <input type="hidden" class="comment-writer form-control" value="myWriter" name="writer" th:value="${member.username}">
                <span class="input-group-text comment-username bg-primary text-white flex-fill" th:text="${member.username}">username</span>
                <div class="input-group">
                    <textarea class="comment-content form-control form-control-sm" name="content" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”" required maxlength="50"></textarea>
                    <button class="btn btn-outline-secondary comment-submit" type="submit">ë“±ë¡</button>
                </div>
                <input type="hidden" class="comment-boardId" name="boardId" value="0" th:value="${boardId}">
                <input type="hidden" class="comment-memberId" name="memberId" value="0" th:value="${member.id}">
                <input type="hidden" class="comment-groupId" name="groupId" value="0">
                <input type="hidden" class="comment-order" name="groupOrder" value="0">
                <input type="hidden" class="comment-depth" name="groupDepth" value="0">
                <input type="hidden" class="comment-target" name="target" value="">
                <input type="hidden" class="comment-targetId" name="targetId" value="">
                <input type="hidden" class="comment-category" name="category" value="" th:value="${board.category.name()}">
            </form>
        </div>
    </div>

    <!-- ë¹ˆ ëŒ“ê¸€ -->
    <div class="empty-container" sec:authorize="isAuthenticated()">
        <div class="other-comment-empty input-group">
            <span class="input-group-text comment-reply-for">@ìƒëŒ€ë°©ID</span>
            <input type="hidden" class="comment-writer form-control" name="writer">
            <span class="input-group-text flex-fill comment-username">writer</span>
            <a class="comment-delete">âœ–</a>
            <div class="input-group">
                <textarea class="comment-content form-control form-control-sm" name="content" disabled maxlength="50"></textarea>
                <button class="btn btn-outline-secondary comment-update" type="button">ìˆ˜ì •</button>
                <button class="btn btn-outline-secondary comment-update-submit" type="button">ë“±ë¡</button>
            </div>
            <input type="hidden" name="boardId" value="0" th:value="${boardId}">
            <!-- ë¡œê·¸ì¸ ì•„ë‹ˆë©´ ìƒì„±X -->
            <input type="hidden" class="comment-memberId" name="memberId" value="0" th:value="${member.id}">
            <input type="hidden" class="comment-groupId" name="groupId" value="0">
            <input type="hidden" class="comment-order" name="groupOrder" value="0">
            <input type="hidden" class="comment-depth" name="groupDepth" value="0">
            <input type="hidden" class="comment-category" name="category" value="" th:value="${board.category.name()}">
        </div>
    </div>

    <!-- ê²€ìƒ‰ ì •ë³´ -->
    <form id="pageInfo" method="get">
        <input type="hidden" th:name="currentPage" th:value="${criteria.currentPage}">
        <input type="hidden" th:name="categoryCode" th:value="${criteria.categoryCode}">
        <input type="hidden" class="searching" th:name="option" th:value="${criteria.option}">
        <input type="hidden" class="searching" th:name="keyword" th:value="${criteria.keyword}">
    </form>

    <!-- message, ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ rttr ë¡œ ë„˜ê²¨ë°›ëŠ” commentMessage -->
    <div style="display: none" id="message">
        <div style="display: none" th:if="${commentMessage}" th:data-message="${commentMessage}"></div>
    </div>

    <div style="display: none" id="selectedCommentId" th:data-selectedcommentid="${selectedCommentId}"></div>

</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>
</body>
</html>